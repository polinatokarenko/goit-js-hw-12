{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"53497690-592ac66f2c7c0c491717e710e\";\n\nexport const getImagesByQuery = (query, page) => {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&page=${page}&per_page=15&image_type=photo&orientation=horizontal&safesearch=true`;\n  \n  return axios.get(url)\n    .then(response => response.data)\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport const createGallery = images => {\n    const ul = document.querySelector('.gallery');\n\n    const markup = images.map(image => `\n        <li>\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <ul class=\"description\">\n                <li><span>Likes:</span> ${image.likes}</li>\n                <li><span>Views:</span> ${image.views}</li>\n                <li><span>Comments:</span> ${image.comments}</li>\n                <li><span>Downloads:</span> ${image.downloads}</li>\n            </ul>\n        </li>\n    `).join(\"\");\n\n    ul.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n    const ul = document.querySelector('.gallery');\n    ul.innerHTML = \"\";\n}\n\nexport const showLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.classList.remove('hidden');\n};\n\nexport const hideLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.classList.add('hidden');\n};\n\nexport const showLoadMoreButton = () => {\n    const loadMoreBTN = document.querySelector('button[type=\"button\"');\n    loadMoreBTN.classList.remove('hidden');\n};\n\nexport const hideLoadMoreButton = () => {\n    const loadMoreBTN = document.querySelector('button[type=\"button\"');\n    loadMoreBTN.classList.add('hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery } from \"./js/render-functions.js\";\nimport { clearGallery } from \"./js/render-functions.js\";\nimport { showLoader } from \"./js/render-functions.js\";\nimport { hideLoader } from \"./js/render-functions.js\";\nimport { showLoadMoreButton } from \"./js/render-functions.js\";\nimport { hideLoadMoreButton } from \"./js/render-functions.js\";\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input[name=\"search-text\"]');\nconst loadMoreBTN = document.querySelector('button[type=\"button\"]');\n\nhideLoader();\nhideLoadMoreButton();\n\nlet page = 1;\nlet lastQuery = \"\";\n\nloadMoreBTN.addEventListener('click', async () => {\n  showLoader();\n  const data = await getImagesByQuery(lastQuery, page);\n  createGallery(data.hits);\n  page += 1;\n    const galleryItem = document.querySelector('.gallery > li');\n    const displayedItems = document.querySelectorAll('.gallery > li').length;\n  \n  if (displayedItems >= data.totalHits) {\n    hideLoadMoreButton();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\"\n    });\n  }\n    \n  if (galleryItem) {\n    const { height } = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      left: 0,\n      behavior: 'smooth'\n    });\n  }\n\n  hideLoader();\n});\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    hideLoadMoreButton();\n    \n    const query = input.value.trim();\n    if (lastQuery !== query) {\n        page = 1;\n    }\n\n    if (!query) {\n        iziToast.warning({\n            message: 'Please enter a search term!',\n        });\n        return;\n    }\n\n    clearGallery();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n        if (!data.hits || data.hits.length === 0) {\n            iziToast.info({\n                message: 'Sorry, no images found. Try another search!',\n            });\n            return;\n        }\n        \n        createGallery(data.hits);\n        page += 1;\n        lastQuery = query;\n        const displayedItems = document.querySelectorAll('.gallery > li').length;\n        if (displayedItems < data.totalHits) {\n            showLoadMoreButton();\n        }\n\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            message: 'Something went wrong, please try again later!',\n        });\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["API_KEY","getImagesByQuery","query","page","url","axios","response","lightbox","SimpleLightbox","createGallery","images","ul","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","loadMoreBTN","lastQuery","data","galleryItem","iziToast","height","event","error"],"mappings":"owBAEA,MAAMA,EAAU,qCAEHC,EAAmB,CAACC,EAAOC,IAAS,CAC/C,MAAMC,EAAM,gCAAgCJ,CAAO,MAAM,mBAAmBE,CAAK,CAAC,SAASC,CAAI,uEAE/F,OAAOE,EAAM,IAAID,CAAG,EACjB,KAAKE,GAAYA,EAAS,IAAI,CACnC,ECNMC,EAAW,IAAIC,EAAe,YAAY,EAEnCC,EAAgBC,GAAU,CACnC,MAAMC,EAAK,SAAS,cAAc,UAAU,EAEtCC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,uBAEhBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,0CAGxBA,EAAM,KAAK;AAAA,0CACXA,EAAM,KAAK;AAAA,6CACRA,EAAM,QAAQ;AAAA,8CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAGxD,EAAE,KAAK,EAAE,EAEVF,EAAG,mBAAmB,YAAaC,CAAM,EAEzCL,EAAS,QAAO,CACpB,EAEaO,EAAe,IAAM,CAC9B,MAAMH,EAAK,SAAS,cAAc,UAAU,EAC5CA,EAAG,UAAY,EACnB,EAEaI,EAAa,IAAM,CACb,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,QAAQ,CACpC,EAEaC,EAAa,IAAM,CACb,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,QAAQ,CACjC,EAEaC,EAAqB,IAAM,CAChB,SAAS,cAAc,sBAAsB,EACrD,UAAU,OAAO,QAAQ,CACzC,EAEaC,EAAqB,IAAM,CAChB,SAAS,cAAc,sBAAsB,EACrD,UAAU,IAAI,QAAQ,CACtC,ECvCMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,2BAA2B,EACtDE,EAAc,SAAS,cAAc,uBAAuB,EAElEL,IACAE,IAEA,IAAIf,EAAO,EACPmB,EAAY,GAEhBD,EAAY,iBAAiB,QAAS,SAAY,CAChDN,IACA,MAAMQ,EAAO,MAAMtB,EAAiBqB,EAAWnB,CAAI,EACnDM,EAAcc,EAAK,IAAI,EACvBpB,GAAQ,EACN,MAAMqB,EAAc,SAAS,cAAc,eAAe,EAU5D,GATyB,SAAS,iBAAiB,eAAe,EAAE,QAE9CD,EAAK,YACzBL,IACAO,EAAS,KAAK,CACZ,QAAS,4DACf,CAAK,GAGCD,EAAa,CACf,KAAM,CAAE,OAAAE,CAAM,EAAKF,EAAY,sBAAqB,EACpD,OAAO,SAAS,CACd,IAAKE,EAAS,EACd,KAAM,EACN,SAAU,QAChB,CAAK,CACF,CAEDV,GACF,CAAC,EAEDG,EAAK,iBAAiB,SAAU,MAAOQ,GAAU,CAC7CA,EAAM,eAAc,EACpBT,IAEA,MAAMhB,EAAQkB,EAAM,MAAM,KAAI,EAK9B,GAJIE,IAAcpB,IACdC,EAAO,GAGP,CAACD,EAAO,CACRuB,EAAS,QAAQ,CACb,QAAS,6BACrB,CAAS,EACD,MACH,CAEDX,IACAC,IAEA,GAAI,CACA,MAAMQ,EAAO,MAAMtB,EAAiBC,EAAOC,CAAI,EAE/C,GAAI,CAACoB,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACtCE,EAAS,KAAK,CACV,QAAS,6CACzB,CAAa,EACD,MACH,CAEDhB,EAAcc,EAAK,IAAI,EACvBpB,GAAQ,EACRmB,EAAYpB,EACW,SAAS,iBAAiB,eAAe,EAAE,OAC7CqB,EAAK,WACtBN,GAGP,OAAQW,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBH,EAAS,MAAM,CACX,QAAS,+CACrB,CAAS,CACT,QAAc,CACNT,GACH,CACL,CAAC"}