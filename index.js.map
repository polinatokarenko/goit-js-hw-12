{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"53497690-592ac66f2c7c0c491717e710e\";\n\nexport const getImagesByQuery = async (query, page) => {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&page=${page}&per_page=15&image_type=photo&orientation=horizontal&safesearch=true`;\n  \n  const response = await axios.get(url);\n  return response.data;\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport const createGallery = images => {\n    const ul = document.querySelector('.gallery');\n\n    const markup = images.map(image => `\n        <li>\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <ul class=\"description\">\n                <li><span>Likes:</span> ${image.likes}</li>\n                <li><span>Views:</span> ${image.views}</li>\n                <li><span>Comments:</span> ${image.comments}</li>\n                <li><span>Downloads:</span> ${image.downloads}</li>\n            </ul>\n        </li>\n    `).join(\"\");\n\n    ul.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n    const ul = document.querySelector('.gallery');\n    ul.innerHTML = \"\";\n}\n\nexport const showLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.classList.remove('hidden');\n};\n\nexport const hideLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.classList.add('hidden');\n};\n\nexport const showLoadMoreButton = () => {\n    const loadMoreBTN = document.querySelector('button[type=\"button\"');\n    loadMoreBTN.classList.remove('hidden');\n};\n\nexport const hideLoadMoreButton = () => {\n    const loadMoreBTN = document.querySelector('button[type=\"button\"');\n    loadMoreBTN.classList.add('hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery } from \"./js/render-functions.js\";\nimport { clearGallery } from \"./js/render-functions.js\";\nimport { showLoader } from \"./js/render-functions.js\";\nimport { hideLoader } from \"./js/render-functions.js\";\nimport { showLoadMoreButton } from \"./js/render-functions.js\";\nimport { hideLoadMoreButton } from \"./js/render-functions.js\";\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input[name=\"search-text\"]');\nconst loadMoreBTN = document.querySelector('button[type=\"button\"]');\n\nhideLoader();\nhideLoadMoreButton();\n\nlet page = 1;\nlet lastQuery = \"\";\n\nloadMoreBTN.addEventListener('click', async () => {\n  page += 1;       // ðŸ‘‰ Ñ–Ð½ÐºÑ€ÐµÐ¼ÐµÐ½Ñ‚ Ð”Ðž Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(lastQuery, page);\n    createGallery(data.hits);\n\n    const galleryItem = document.querySelector('.gallery > li');\n    const displayedItems = document.querySelectorAll('.gallery > li').length;\n\n    if (displayedItems >= data.totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\"\n      });\n    }\n\n    if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        left: 0,\n        behavior: 'smooth'\n      });\n    }\n\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'Something went wrong, please try again later!',\n    });\n\n  } finally {\n    hideLoader();\n  }\n});\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  hideLoadMoreButton();\n    \n  const query = input.value.trim();\n  \n  if (lastQuery !== query) {\n    page = 1;\n  }\n\n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a search term!',\n    });\n    return;\n  }\n\n  clearGallery();\n  showLoader();\n\n  try {\n    lastQuery = query;\n    \n    const data = await getImagesByQuery(query, page);\n\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.info({\n        message: 'Sorry, no images found. Try another search!',\n      });\n      hideLoader();\n      return;\n    }\n\n    createGallery(data.hits);\n    page += 1;\n\n    const displayedItems = document.querySelectorAll('.gallery > li').length;\n    if (displayedItems < data.totalHits) {\n      showLoadMoreButton();\n    }\n\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'Something went wrong, please try again later!',\n    });\n\n  } finally {\n    hideLoader();\n  }\n});"],"names":["API_KEY","getImagesByQuery","query","page","url","axios","lightbox","SimpleLightbox","createGallery","images","ul","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","loadMoreBTN","lastQuery","data","galleryItem","iziToast","height","error","event"],"mappings":"owBAEA,MAAMA,EAAU,qCAEHC,EAAmB,MAAOC,EAAOC,IAAS,CACrD,MAAMC,EAAM,gCAAgCJ,CAAO,MAAM,mBAAmBE,CAAK,CAAC,SAASC,CAAI,uEAG/F,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IAClB,ECNME,EAAW,IAAIC,EAAe,YAAY,EAEnCC,EAAgBC,GAAU,CACnC,MAAMC,EAAK,SAAS,cAAc,UAAU,EAEtCC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,uBAEhBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,0CAGxBA,EAAM,KAAK;AAAA,0CACXA,EAAM,KAAK;AAAA,6CACRA,EAAM,QAAQ;AAAA,8CACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAGxD,EAAE,KAAK,EAAE,EAEVF,EAAG,mBAAmB,YAAaC,CAAM,EAEzCL,EAAS,QAAO,CACpB,EAEaO,EAAe,IAAM,CAC9B,MAAMH,EAAK,SAAS,cAAc,UAAU,EAC5CA,EAAG,UAAY,EACnB,EAEaI,EAAa,IAAM,CACb,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,QAAQ,CACpC,EAEaC,EAAa,IAAM,CACb,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,QAAQ,CACjC,EAEaC,EAAqB,IAAM,CAChB,SAAS,cAAc,sBAAsB,EACrD,UAAU,OAAO,QAAQ,CACzC,EAEaC,EAAqB,IAAM,CAChB,SAAS,cAAc,sBAAsB,EACrD,UAAU,IAAI,QAAQ,CACtC,ECvCMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,2BAA2B,EACtDE,EAAc,SAAS,cAAc,uBAAuB,EAElEL,IACAE,IAEA,IAAId,EAAO,EACPkB,EAAY,GAEhBD,EAAY,iBAAiB,QAAS,SAAY,CAChDjB,GAAQ,EACRW,IAEA,GAAI,CACF,MAAMQ,EAAO,MAAMrB,EAAiBoB,EAAWlB,CAAI,EACnDK,EAAcc,EAAK,IAAI,EAEvB,MAAMC,EAAc,SAAS,cAAc,eAAe,EAU1D,GATuB,SAAS,iBAAiB,eAAe,EAAE,QAE5CD,EAAK,YACzBL,IACAO,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,GAGCD,EAAa,CACf,KAAM,CAAE,OAAAE,CAAM,EAAKF,EAAY,sBAAqB,EACpD,OAAO,SAAS,CACd,IAAKE,EAAS,EACd,KAAM,EACN,SAAU,QAClB,CAAO,CACF,CAEF,OAAQC,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBF,EAAS,MAAM,CACb,QAAS,+CACf,CAAK,CAEL,QAAY,CACRT,GACD,CACH,CAAC,EAEDG,EAAK,iBAAiB,SAAU,MAAOS,GAAU,CAC/CA,EAAM,eAAc,EACpBV,IAEA,MAAMf,EAAQiB,EAAM,MAAM,KAAI,EAM9B,GAJIE,IAAcnB,IAChBC,EAAO,GAGL,CAACD,EAAO,CACVsB,EAAS,QAAQ,CACf,QAAS,6BACf,CAAK,EACD,MACD,CAEDX,IACAC,IAEA,GAAI,CACFO,EAAYnB,EAEZ,MAAMoB,EAAO,MAAMrB,EAAiBC,EAAOC,CAAI,EAE/C,GAAI,CAACmB,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACxCE,EAAS,KAAK,CACZ,QAAS,6CACjB,CAAO,EACDT,IACA,MACD,CAEDP,EAAcc,EAAK,IAAI,EACvBnB,GAAQ,EAEe,SAAS,iBAAiB,eAAe,EAAE,OAC7CmB,EAAK,WACxBN,GAGH,OAAQU,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBF,EAAS,MAAM,CACb,QAAS,+CACf,CAAK,CAEL,QAAY,CACRT,GACD,CACH,CAAC"}